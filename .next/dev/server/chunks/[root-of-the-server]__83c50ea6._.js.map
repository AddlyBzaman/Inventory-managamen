{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///C:/tubes/Inventory%20Management%20System/app/api/inventory/history/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { db } from '../../../../lib/db';\r\nimport { historyItems } from '../../../../lib/db/schema';\r\nimport { desc } from 'drizzle-orm';\r\nimport { createClient } from '@libsql/client';\r\n\r\nexport async function GET() {\r\n  try {\r\n    // Use direct client for consistency with delete history insert\r\n    const client = createClient({\r\n      url: process.env.TURSO_DATABASE_URL || '',\r\n      authToken: process.env.TURSO_AUTH_TOKEN || '',\r\n    });\r\n    \r\n    const result = await client.execute('SELECT * FROM history_items ORDER BY timestamp DESC');\r\n    \r\n    console.log('Direct client history result:', result.rows.length, 'records');\r\n    \r\n    return NextResponse.json({ success: true, data: result.rows });\r\n  } catch (error) {\r\n    console.error('Error fetching history:', error);\r\n    return NextResponse.json(\r\n      { success: false, message: 'Terjadi kesalahan server', error: error.message },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAIA;;;;;;;AAEO,eAAe;IACpB,IAAI;QACF,+DAA+D;QAC/D,MAAM,SAAS,IAAA,6MAAY,EAAC;YAC1B,KAAK,QAAQ,GAAG,CAAC,kBAAkB,IAAI;YACvC,WAAW,QAAQ,GAAG,CAAC,gBAAgB,IAAI;QAC7C;QAEA,MAAM,SAAS,MAAM,OAAO,OAAO,CAAC;QAEpC,QAAQ,GAAG,CAAC,iCAAiC,OAAO,IAAI,CAAC,MAAM,EAAE;QAEjE,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,MAAM,OAAO,IAAI;QAAC;IAC9D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,SAAS;YAA4B,OAAO,MAAM,OAAO;QAAC,GAC5E;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}