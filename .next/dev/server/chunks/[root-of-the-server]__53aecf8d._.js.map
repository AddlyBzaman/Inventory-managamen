{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/tubes/Inventory%20Management%20System/lib/db/schema.ts"],"sourcesContent":["import { sqliteTable, text, real, integer, numeric, uniqueIndex } from \"drizzle-orm/sqlite-core\";\r\nimport { sql } from \"drizzle-orm\";\r\n\r\nexport const products = sqliteTable(\"products\", {\r\n  id: text().primaryKey().notNull(),\r\n  name: text().notNull(),\r\n  description: text(),\r\n  category: text().notNull(),\r\n  quantity: integer().default(0).notNull(),\r\n  minStock: integer().default(5).notNull(),\r\n  price: real().notNull(),\r\n  location: text(),\r\n  sku: text().notNull(),\r\n  unit: text().default(\"pcs\").notNull(),\r\n  createdAt: numeric().default(sql`(CURRENT_TIMESTAMP)`).notNull(),\r\n  updatedAt: numeric().notNull(),\r\n},\r\n(table) => [\r\n  uniqueIndex(\"products_sku_key\").on(table.sku),\r\n]);\r\n\r\nexport const historyItems = sqliteTable(\"history_items\", {\r\n  id: text().primaryKey().notNull(),\r\n  productId: text().notNull().references(() => products.id, { onDelete: \"cascade\", onUpdate: \"cascade\" }),\r\n  productName: text().notNull(),\r\n  action: text().notNull(), // 'added' | 'updated' | 'deleted'\r\n  quantity: integer().notNull(),\r\n  timestamp: numeric().default(sql`(CURRENT_TIMESTAMP)`).notNull(),\r\n  userId: text().notNull(),\r\n  userName: text().notNull(),\r\n  details: text(),\r\n});\r\n\r\nexport const users = sqliteTable(\"users\", {\r\n  id: text().primaryKey().notNull(),\r\n  username: text().notNull(),\r\n  email: text(),\r\n  password: text().notNull(),\r\n  name: text(),\r\n  role: text().default(\"user\").notNull(),\r\n  isActive: integer().default(1).notNull(),\r\n  createdAt: numeric().default(sql`(CURRENT_TIMESTAMP)`).notNull(),\r\n  updatedAt: numeric().notNull(),\r\n},\r\n(table) => [\r\n  uniqueIndex(\"users_email_key\").on(table.email),\r\n  uniqueIndex(\"users_username_key\").on(table.username),\r\n]);\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEO,MAAM,WAAW,IAAA,0KAAW,EAAC,YAAY;IAC9C,IAAI,IAAA,6KAAI,IAAG,UAAU,GAAG,OAAO;IAC/B,MAAM,IAAA,6KAAI,IAAG,OAAO;IACpB,aAAa,IAAA,6KAAI;IACjB,UAAU,IAAA,6KAAI,IAAG,OAAO;IACxB,UAAU,IAAA,mLAAO,IAAG,OAAO,CAAC,GAAG,OAAO;IACtC,UAAU,IAAA,mLAAO,IAAG,OAAO,CAAC,GAAG,OAAO;IACtC,OAAO,IAAA,6KAAI,IAAG,OAAO;IACrB,UAAU,IAAA,6KAAI;IACd,KAAK,IAAA,6KAAI,IAAG,OAAO;IACnB,MAAM,IAAA,6KAAI,IAAG,OAAO,CAAC,OAAO,OAAO;IACnC,WAAW,IAAA,mLAAO,IAAG,OAAO,CAAC,qJAAG,CAAC,mBAAmB,CAAC,EAAE,OAAO;IAC9D,WAAW,IAAA,mLAAO,IAAG,OAAO;AAC9B,GACA,CAAC,QAAU;QACT,IAAA,4KAAW,EAAC,oBAAoB,EAAE,CAAC,MAAM,GAAG;KAC7C;AAEM,MAAM,eAAe,IAAA,0KAAW,EAAC,iBAAiB;IACvD,IAAI,IAAA,6KAAI,IAAG,UAAU,GAAG,OAAO;IAC/B,WAAW,IAAA,6KAAI,IAAG,OAAO,GAAG,UAAU,CAAC,IAAM,SAAS,EAAE,EAAE;QAAE,UAAU;QAAW,UAAU;IAAU;IACrG,aAAa,IAAA,6KAAI,IAAG,OAAO;IAC3B,QAAQ,IAAA,6KAAI,IAAG,OAAO;IACtB,UAAU,IAAA,mLAAO,IAAG,OAAO;IAC3B,WAAW,IAAA,mLAAO,IAAG,OAAO,CAAC,qJAAG,CAAC,mBAAmB,CAAC,EAAE,OAAO;IAC9D,QAAQ,IAAA,6KAAI,IAAG,OAAO;IACtB,UAAU,IAAA,6KAAI,IAAG,OAAO;IACxB,SAAS,IAAA,6KAAI;AACf;AAEO,MAAM,QAAQ,IAAA,0KAAW,EAAC,SAAS;IACxC,IAAI,IAAA,6KAAI,IAAG,UAAU,GAAG,OAAO;IAC/B,UAAU,IAAA,6KAAI,IAAG,OAAO;IACxB,OAAO,IAAA,6KAAI;IACX,UAAU,IAAA,6KAAI,IAAG,OAAO;IACxB,MAAM,IAAA,6KAAI;IACV,MAAM,IAAA,6KAAI,IAAG,OAAO,CAAC,QAAQ,OAAO;IACpC,UAAU,IAAA,mLAAO,IAAG,OAAO,CAAC,GAAG,OAAO;IACtC,WAAW,IAAA,mLAAO,IAAG,OAAO,CAAC,qJAAG,CAAC,mBAAmB,CAAC,EAAE,OAAO;IAC9D,WAAW,IAAA,mLAAO,IAAG,OAAO;AAC9B,GACA,CAAC,QAAU;QACT,IAAA,4KAAW,EAAC,mBAAmB,EAAE,CAAC,MAAM,KAAK;QAC7C,IAAA,4KAAW,EAAC,sBAAsB,EAAE,CAAC,MAAM,QAAQ;KACpD"}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///C:/tubes/Inventory%20Management%20System/lib/db.ts"],"sourcesContent":["import 'server-only';\r\n\r\nimport { drizzle } from 'drizzle-orm/libsql';\r\nimport { createClient } from '@libsql/client';\r\nimport * as schema from './db/schema';\r\n\r\nconst client = createClient({\r\n  url: process.env.NEXT_PUBLIC_TURSO_DATABASE_URL || process.env.TURSO_DATABASE_URL!,\r\n  authToken: process.env.NEXT_PUBLIC_TURSO_AUTH_TOKEN || process.env.TURSO_AUTH_TOKEN!,\r\n});\r\n\r\nexport const db = drizzle(client, { schema });\r\nexport { schema };\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;AACA;;;;;;;;;;AAEA,MAAM,SAAS,IAAA,6MAAY,EAAC;IAC1B,KAAK,QAAQ,GAAG,CAAC,8BAA8B,IAAI,QAAQ,GAAG,CAAC,kBAAkB;IACjF,WAAW,QAAQ,GAAG,CAAC,4BAA4B,IAAI,QAAQ,GAAG,CAAC,gBAAgB;AACrF;AAEO,MAAM,KAAK,IAAA,+KAAO,EAAC,QAAQ;IAAE,QAAA;AAAO"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///C:/tubes/Inventory%20Management%20System/app/api/inventory/products/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { db } from '../../../../lib/db';\r\nimport { products, historyItems } from '../../../../lib/db/schema';\r\nimport { eq, desc } from 'drizzle-orm';\r\n\r\nexport async function GET() {\r\n  try {\r\n    const allProducts = await db.select().from(products);\r\n    return NextResponse.json({ success: true, data: allProducts });\r\n  } catch (error) {\r\n    console.error('Error fetching products:', error);\r\n    return NextResponse.json(\r\n      { success: false, message: 'Terjadi kesalahan server' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const productData = await request.json();\r\n    \r\n    const newProduct = {\r\n      id: crypto.randomUUID(),\r\n      ...productData,\r\n      createdAt: new Date().toISOString(),\r\n      updatedAt: new Date().toISOString()\r\n    };\r\n    \r\n    await db.insert(products).values(newProduct);\r\n    \r\n    // Add history record\r\n    const historyRecord = {\r\n      id: crypto.randomUUID(),\r\n      productId: newProduct.id,\r\n      productName: newProduct.name,\r\n      action: 'added',\r\n      quantity: newProduct.quantity,\r\n      timestamp: Date.now().toString(),\r\n      userId: 'system', // TODO: Get from auth session\r\n      userName: 'System',\r\n      details: `Added ${newProduct.quantity} ${newProduct.unit} of ${newProduct.name}`\r\n    };\r\n    \r\n    await db.insert(historyItems).values(historyRecord);\r\n    \r\n    return NextResponse.json({ success: true, data: newProduct });\r\n  } catch (error) {\r\n    console.error('Error creating product:', error);\r\n    return NextResponse.json(\r\n      { success: false, message: 'Terjadi kesalahan server' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;;;;;AAGO,eAAe;IACpB,IAAI;QACF,MAAM,cAAc,MAAM,iIAAE,CAAC,MAAM,GAAG,IAAI,CAAC,iIAAQ;QACnD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,MAAM;QAAY;IAC9D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,SAAS;QAA2B,GACtD;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,cAAc,MAAM,QAAQ,IAAI;QAEtC,MAAM,aAAa;YACjB,IAAI,OAAO,UAAU;YACrB,GAAG,WAAW;YACd,WAAW,IAAI,OAAO,WAAW;YACjC,WAAW,IAAI,OAAO,WAAW;QACnC;QAEA,MAAM,iIAAE,CAAC,MAAM,CAAC,iIAAQ,EAAE,MAAM,CAAC;QAEjC,qBAAqB;QACrB,MAAM,gBAAgB;YACpB,IAAI,OAAO,UAAU;YACrB,WAAW,WAAW,EAAE;YACxB,aAAa,WAAW,IAAI;YAC5B,QAAQ;YACR,UAAU,WAAW,QAAQ;YAC7B,WAAW,KAAK,GAAG,GAAG,QAAQ;YAC9B,QAAQ;YACR,UAAU;YACV,SAAS,CAAC,MAAM,EAAE,WAAW,QAAQ,CAAC,CAAC,EAAE,WAAW,IAAI,CAAC,IAAI,EAAE,WAAW,IAAI,EAAE;QAClF;QAEA,MAAM,iIAAE,CAAC,MAAM,CAAC,qIAAY,EAAE,MAAM,CAAC;QAErC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,MAAM;QAAW;IAC7D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,SAAS;QAA2B,GACtD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}