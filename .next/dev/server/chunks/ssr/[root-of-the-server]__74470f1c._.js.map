{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/tubes/Inventory%20Management%20System/app/login/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { toast } from 'sonner'\r\nimport { Eye, EyeOff, LogIn, Package } from 'lucide-react'\r\n\r\nexport default function LoginPage() {\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    password: ''\r\n  })\r\n  const [showPassword, setShowPassword] = useState(false)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [loginError, setLoginError] = useState('')\r\n  const router = useRouter()\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setIsLoading(true)\r\n    setLoginError('')\r\n\r\n    try {\r\n      const response = await fetch('/api/auth/login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(formData),\r\n      })\r\n\r\n      const data = await response.json()\r\n\r\n      if (data.success) {\r\n        toast.success('Login successful!')\r\n        // Token is stored in httpOnly cookie, no need to store in localStorage\r\n        localStorage.setItem('user', JSON.stringify(data.user))\r\n        \r\n        // Redirect to dashboard\r\n        router.push('/dashboard')\r\n      } else {\r\n        // Show specific error message based on error type\r\n        if (data.error === 'USER_NOT_FOUND') {\r\n          setLoginError('Username tidak ditemukan atau akun tidak aktif')\r\n          toast.error('Username tidak ditemukan atau akun tidak aktif')\r\n        } else if (data.error === 'INVALID_PASSWORD') {\r\n          setLoginError('Password salah. Silakan coba lagi.')\r\n          toast.error('Password salah. Silakan coba lagi.')\r\n        } else {\r\n          setLoginError(data.message || 'Login gagal. Silakan coba lagi.')\r\n          toast.error(data.message || 'Login gagal. Silakan coba lagi.')\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Login error:', error)\r\n      setLoginError('Terjadi kesalahan koneksi. Silakan coba lagi.')\r\n      toast.error('Terjadi kesalahan koneksi. Silakan coba lagi.')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        {/* Header */}\r\n        <div className=\"text-center\">\r\n          <div className=\"mx-auto h-16 w-16 bg-blue-600 rounded-xl flex items-center justify-center mb-4\">\r\n            <Package className=\"h-8 w-8 text-white\" />\r\n          </div>\r\n          <h2 className=\"text-3xl font-bold text-gray-900\">\r\n            Inventory Management\r\n          </h2>\r\n          <p className=\"mt-2 text-sm text-gray-600\">\r\n            Sign in to manage your inventory\r\n          </p>\r\n        </div>\r\n\r\n        {/* Login Form */}\r\n        <div className=\"bg-white rounded-xl shadow-xl p-8\">\r\n          {/* Error Display */}\r\n          {loginError && (\r\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                </div>\r\n                <div className=\"ml-3\">\r\n                  <p className=\"text-sm text-red-800 font-medium\">Login Gagal</p>\r\n                  <p className=\"text-sm text-red-600 mt-1\">{loginError}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <form className=\"space-y-6\" onSubmit={handleSubmit}>\r\n            <div>\r\n              <label htmlFor=\"username\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Username\r\n              </label>\r\n              <input\r\n                id=\"username\"\r\n                name=\"username\"\r\n                type=\"text\"\r\n                required\r\n                value={formData.username}\r\n                onChange={handleChange}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition\"\r\n                placeholder=\"Enter your username\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Password\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  required\r\n                  value={formData.password}\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition\"\r\n                  placeholder=\"Enter your password\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  {showPassword ? (\r\n                    <EyeOff className=\"h-5 w-5\" />\r\n                  ) : (\r\n                    <Eye className=\"h-5 w-5\" />\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoading}\r\n                className=\"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition duration-200 flex items-center justify-center gap-2\"\r\n              >\r\n                {isLoading ? (\r\n                  <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\r\n                ) : (\r\n                  <>\r\n                    <LogIn className=\"h-5 w-5\" />\r\n                    Sign In\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </form>\r\n\r\n          {/* Database Authentication Info */}\r\n          <div className=\"mt-6 p-4 bg-green-50 rounded-lg\">\r\n            <p className=\"text-sm text-green-800 font-medium mb-1\">Database Authentication:</p>\r\n            <p className=\"text-xs text-green-600\">Login dengan user yang ada di database</p>\r\n            <p className=\"text-xs text-green-600\">Hubungi admin untuk credentials</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"text-center text-sm text-gray-500\">\r\n          <p>Secure Inventory Management System</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}