(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13497,e=>{"use strict";var r=e.i(43476),t=e.i(71645);e.i(47167);let o=new class{API_BASE="http://localhost:3000/api";async login(e,r){try{let t=await fetch(`${this.API_BASE}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r}),cache:"no-store"}),o=await t.json();if(!o.success)return null;return o.user}catch(e){return console.error("Login error:",e),null}}async logout(){try{await fetch(`${this.API_BASE}/auth/logout`,{method:"POST",cache:"no-store"})}catch(e){console.error("Logout error:",e)}}async getCurrentUser(){try{let e=await fetch(`${this.API_BASE}/auth/me`,{cache:"no-store"}),r=await e.json();if(!r.success)return null;return r.user}catch(e){return console.error("Get current user error:",e),null}}async refreshToken(){return!0}async createUser(e){return console.warn("Create user functionality needs API route implementation"),null}},n=(0,t.createContext)(void 0);function a({children:e}){let[a,s]=(0,t.useState)(!1),[l,u]=(0,t.useState)(null),[c,i]=(0,t.useState)(!0),[h,y]=(0,t.useState)(null),[f,g]=(0,t.useState)(null),w=()=>{h&&clearTimeout(h),f&&clearTimeout(f),y(null),g(null)},S=()=>{w();let e=setTimeout(()=>{console.warn("Session will expire in 5 minutes")},15e5),r=setTimeout(async()=>{await A()},18e5);g(e),y(r)};(0,t.useEffect)(()=>((async()=>{try{let e=await o.getCurrentUser();e&&(s(!0),u(e),S())}catch(e){console.error("Auth check error:",e),await o.logout()}finally{i(!1)}})(),()=>w()),[]);let d=async(e,r)=>{try{i(!0);let t=await o.login(e,r);if(t)return s(!0),u(t),S(),!0;return!1}catch(e){return console.error("Login error:",e),!1}finally{i(!1)}},A=async()=>{try{i(!0),await o.logout()}catch(e){console.error("Logout error:",e)}finally{s(!1),u(null),i(!1),w()}},T=async()=>{try{let e=await o.getCurrentUser();if(e)return u(e),S(),!0;return!1}catch(e){return console.error("Token refresh error:",e),await A(),!1}};return(0,r.jsx)(n.Provider,{value:{isAuthenticated:a,user:l,login:d,logout:A,isLoading:c,refreshToken:T,extendSession:()=>{a&&S()}},children:e})}function s({children:e}){return(0,r.jsx)(a,{children:e})}e.s(["AuthProviderWrapper",()=>s],13497)}]);